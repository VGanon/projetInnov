<html ng-app="movieRecommendationApp" ng-controller="Controller as ctrl">
	<head>
		<meta charset="UTF-8">
		<link rel="stylesheet" href="index.css" type="text/css">
		<!-- Imports -->
		<script src="http://code.jquery.com/jquery-1.11.1.js"></script>
		<script src="node_modules/angular/angular.js"></script>
		<script src="index.js"></script>
		<script src="core/apiRequests/apirequests.js"></script>
	</head>
	<body>
		<!-- TODO barre a completer -->
		<div id="topbar">
			<a id="home" href="#" ng-click="ctrl.showRecommendedMovies()">
				<img src="images/accueil.png" />
			</a>
			<input placeholder="Chercher des films, des acteurs ou d'autres choses" ng-model="inputText" 
				onkeydown="if(event.keyCode === 13) $('#search').click()" />
			<a id="search" href="#" ng-click="ctrl.search(inputText)">
				<img src="images/search.png" />
			</a>
		</div>

		<!-- Corps de la page -->
		<div id="content">
			<!-- Accueil -->
			<div id="home" ng-show="ctrl.data.movies">
				<div ng-repeat="movie in ctrl.data.movies" ng-class-even="'background'" class="movie">
					<div class="rank">
						#{{movie.rank}}
					</div>
					<img ng-src={{movie.imgUrl}} />
					<p>
						<div class="title">
							{{movie.title}}
						</div>
						<div class="information">
							de {{movie.information}}
						</div>
					</p><p>
						{{movie.description}}
					</p>
				</div>
				<div class="center">
					<!-- TODO : au clic, affiche 10 movies supplementaires -->
					<button>Afficher plus</button>
				</div>
			</div>

			<!-- Recherche -->
			<div id="search" ng-show="ctrl.data.search">
				<h3>Films</h3>
				<div ng-repeat="movie in ctrl.data.search.movies.results" ng-class-even="'background'" class="movie">
					<img ng-src="https://image.tmdb.org/t/p/w500/{{movie.poster_path}}" />
					<p>
						<div class="title">
							{{movie.title}}
						</div>
						<div class="information">
							{{movie.release_date}}
						</div>
					</p><p>
						{{movie.overview}}
					</p>
				</div>
				<h3>Acteurs</h3>
				<div class="actors">
					<span ng-repeat="actor in ctrl.data.search.actors.results">
						<a href="#" ng-click="ctrl.searchByActor(actor.name, actor.known_for)">
							{{actor.name}}
						</a>, 
					</span>
				</div>
			</div>
			
			<!-- Recherche selon un acteur -->
			<div id="searchByActor" ng-show="ctrl.data.searchByActor">
				<h3>Films populaires avec {{ctrl.data.searchByActor.actor}}</h3>
				<div ng-repeat="movie in ctrl.data.searchByActor.movies" ng-class-even="'background'" class="movie">
					<img ng-src="https://image.tmdb.org/t/p/w500/{{movie.poster_path}}" />
					<p>
						<div class="title">
							{{movie.title}}
						</div>
						<div class="information">
							{{movie.release_date}}
						</div>
					</p><p>
						{{movie.overview}}
					</p>
				</div>
			</div>
		
		</div>
	</body>
</html>


