<html>
	<head>
		<meta charset="UTF-8">
		<link href="node_modules/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
		<title>Accueil</title>
	</head>
	
	<body>
	
		<nav class="navbar navbar-default navbar-fixed-top" role="navigation">
			<div class="container">
				<!-- Brand and toggle get grouped for better mobile display -->
				<div class="navbar-header">
					<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
						<span class="sr-only">Toggle navigation</span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</button>
					<a class="navbar-brand" href="#">MoviesBestChoice</a>
				</div>

				<!-- Collect the nav links, forms, and other content for toggling -->
				<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
					<ul class="nav navbar-nav">
						<li class="active"><a href="#">Accueil</a></li>
						<li><a href="/profil">Profil</a></li>
						<li class="dropdown">
							<a href="#" class="dropdown-toggle" data-toggle="dropdown">Films recommandés<b class="caret"></b></a>
							<ul class="dropdown-menu">
								<li><a href="#">Films recommandés par MoviesBestChoice</a></li>
								<li class="divider"></li>
								<li><a href="#">Films recommandés par amis</a></li>
								<li><a href="#">Films recommandés par un ami</a></li>
								<li class="divider"></li>
								<li><a href="#">Films recommandés par catégorie</a></li>
							</ul>
						</li>
					</ul>
					
					<ul class="nav navbar-nav navbar-right">
						<li><a href="#"><span class="glyphicon glyphicon-log-in"></span> Sé déconnecter</a></li>
					</ul>

					<form class="navbar-form" role="search">
						<div class="input-group" style="padding-left:200px;">
							<input type="text" class="form-control pull-right" style="width: 250px; " placeholder="Recherche des films">
							<span class="input-group-btn">
								<button type="submit" class="btn btn-default">
									<span class="glyphicon glyphicon-search">
										<span class="sr-only">Rechercher des films</span>
									</span>
								</button>
							</span>
						</div>
					</form>
					
					
				</div><!-- /.navbar-collapse -->
			</div><!-- /.container-fluid -->
		</nav>
	
		<nav class="navbar navbar-inverse" role="navigation" style="padding-left:100px;">
			<ul class="nav navbar-nav">
				<li class="active"><a href="/">Accueil<span class="sr-only">(current)</span></a></li>
				<li><input placeholder="Chercher un film"/></li>
			</ul>
			<ul class="nav navbar-nav navbar-right">
				<li><a href="/createAccount.html">Inscription</a></li>
				<li><a href="/login.html">Connexion</a></li>
			</ul>
		</nav>
		
		
		<!-- TODO barre a completer -->
		<div id="topbar">
			<input placeholder="Chercher un film" />
		</div>
		<div id="content"></div>

		<!-- Imports -->
		<script src="node_modules/jquery/dist/jquery.min.js"></script>
		<script src="node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
		<script src="node_modules/socket.io/node_modules/socket.io-client/socket.io.js"></script>

		<!-- Mise en place dynamique de la page -->
		<script>
			// TODO : Appeler l'algo pour recuperer les 10 films preferes.
			// Pour l'instant, test en dur.
			var filmIds = 0;
			function generateFilmDescription(title, producer, imgUrl, rank, descrip, criterias){
				filmIds++;
				return {
					"id": filmIds,
					"title": title,
					"producer": producer,
					"description": descrip,
					"imgUrl": imgUrl,
					"rank": rank,
					"criterias": criterias
				};
			}

			var films = [];
			films.push(generateFilmDescription("Django Unchained", "Quentin Tarantino", "tmp/images/django_unchained.jpg", 1, 
				"Dans le sud des États-Unis, deux ans avant la guerre de Sécession, le Dr King Schultz," +
				"un chasseur de primes allemand, fait l’acquisition de Django, un esclave qui peut l’aider" + 
				"à traquer les frères Brittle, les meurtriers qu’il recherche. Schultz promet à Django de lui" +
				"rendre sa liberté lorsqu’il aura capturé les Brittle – morts ou vifs." +
				"Alors que les deux hommes pistent les dangereux criminels, Django n’oublie pas que son seul" +
				"but est de retrouver Broomhilda, sa femme, dont il fut séparé à cause du commerce des esclaves…" +
				"Lorsque Django et Schultz arrivent dans l’immense plantation du puissant Calvin Candie, ils" +
				"éveillent les soupçons de Stephen, un esclave qui sert Candie et a toute sa confiance. " +
				"Le moindre de leurs mouvements est désormais épié par une dangereuse organisation " +
				"de plus en plus proche… Si Django et Schultz veulent espérer s’enfuir avec Broomhilda, " +
				"ils vont devoir choisir entre l’indépendance et la solidarité, entre le sacrifice et la survie..."
			));
			films.push(generateFilmDescription("Inglourious Basterds", "Quentin Tarantino", "tmp/images/inglourious_basterds.jpg", 2, 
				"Dans la France occupée de 1940, Shosanna Dreyfus assiste à l'exécution de sa famille tombée " +
				"entre les mains du colonel nazi Hans Landa. Shosanna s'échappe de justesse et s'enfuit à " +
				"Paris où elle se construit une nouvelle identité en devenant exploitante d'une salle de cinéma." +
				"Quelque part ailleurs en Europe, le lieutenant Aldo Raine forme un groupe de soldats juifs " +
				"américains pour mener des actions punitives particulièrement sanglantes contre les nazis. " +
				"\"Les bâtards\", nom sous lequel leurs ennemis vont apprendre à les connaître, se joignent à " +
				"l'actrice allemande et agent secret Bridget von Hammersmark pour tenter d'éliminer les hauts" +
				"dignitaires du Troisième Reich. Leurs destins vont se jouer à l'entrée du cinéma où Shosanna " +
				"est décidée à mettre à exécution une vengeance très personnelle..."
			));
			films.push(generateFilmDescription("Harry Potter et l'Ordre du Phénix", "J. K. Rowling, David Yates", "tmp/images/harry_potter_5.jpg", 3, 
				"Alors qu'il entame sa cinquième année d'études à Poudlard, Harry Potter découvre" +
				"que la communauté des sorciers ne semble pas croire au retour de Voldemort, " +
				"convaincue par une campagne de désinformation orchestrée par le Ministre de la " +
				"Magie Cornelius Fudge. Afin de le maintenir sous surveillance, Fudge impose à " +
				"Poudlard un nouveau professeur de Défense contre les Forces du Mal, Dolorès Ombrage, " +
				"chargée de maintenir l'ordre à l'école et de surveiller les faits et gestes de Dumbledore. " +
				"Prodiguant aux élèves des cours sans grand intérêt, celle qui se fait appeler la Grande " +
				"Inquisitrice de Poudlard semble également décidée à tout faire pour rabaisser Harry. " +
				"Entouré de ses amis Ron et Hermione, ce dernier met sur pied un groupe secret, " +
				"\"L'Armée de Dumbledore\", pour leur enseigner l'art de la défense contre les forces du " +
				"Mal et se préparer à la guerre qui s'annonce... "
			));
			
			var backgroundClass = null;
			films.forEach(function(film, i){
				backgroundClass = (i%2) ? "background" : "";
				$("<div>")
					.addClass("film " + backgroundClass)
					.append( $("<div>")
						.addClass("rank")
						.text("#" + film.rank)
					).append( $("<img>")
						.attr("src", film.imgUrl)
					).append( $("<p>")
						.append( $("<div>")
							.addClass("title")
							.text(film.title)
						).append( $("<div>")
							.addClass("producer")
							.text("de " + film.producer)
						)
					).append( $("<p>")
						.text(film.description)
					).appendTo( $("#content") );
			});
		</script>
	</body>
</html>


